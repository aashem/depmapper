(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{33:function(e,t,n){e.exports=n(67)},42:function(e,t,n){},65:function(e,t,n){},67:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(5),o=n.n(c),i=n(8),u=(n(42),n(11)),s=n(12),l=n(1),d=n.n(l),p=n(4),f=n(10),m=n.n(f),v="http://localhost:3001/api/graph",h={getAll:function(){var e=Object(p.a)(d.a.mark(function e(){var t;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get(v);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(p.a)(d.a.mark(function e(t){var n;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.post(v,t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(p.a)(d.a.mark(function e(t,n){var a;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.put(v+"/".concat(t),n);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),getById:function(){var e=Object(p.a)(d.a.mark(function e(t){var n;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get(v+"/".concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),remove:function(){var e=Object(p.a)(d.a.mark(function e(t){var n;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.delete(v+"/".concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT":case"POST":case"UPDATE":case"INITID":case"DELETEID":return t.data;default:return e}},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INITCY":return t.data;default:return e}},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INITNODES":return t.data;default:return e}},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INITEDGES":return t.data;default:return e}},E=function(){return r.a.createElement("div",null,"DepMapper",r.a.createElement("a",{href:"https://github.com/aashem/depmapper/"}," Git"))},N=n(19),j=n.n(N),x=n(30),I=n.n(x),k=function(e){var t=!1,n=[],a=[];e||j.a.use(I.a);var r=window.cy=j()({container:document.getElementById("cy"),autolock:!1,hideEdgesOnViewport:!1,minZoom:1,maxZoom:10,style:[{selector:"node",style:{label:"data(name)"}},{selector:"edge",style:{"curve-style":"bezier",width:5,"line-color":"black","target-arrow-color":"black","target-arrow-shape":"triangle",label:"data(name)"}}],layout:{name:"preset"}});return r.cxtmenu({selector:"node",commands:[{content:"Remove",select:function(e){r.remove(e),r.resize()}},{content:"Connect",select:function(e){e.select(),e.lock(),r.resize()}},{content:"Rename",select:function(e){var t=window.prompt();t&&(e.data("name",t),r.resize())}},{content:"Group",select:function(e){t=!0,e.lock(),a.push(e),window.alert("choose parent node"),r.resize()}}]}),r.cxtmenu({selector:"edge",commands:[{content:"Remove",select:function(e){r.remove(e),r.resize()}},{content:"Rename",select:function(e){var t=window.prompt();t&&(e.data("name",t),r.resize())}}]}),r.on("tap",function(e){var t=e.target;if(console.log(n),t!==r&&(console.log(t.data()),a.length>=1&&(a[0].move({parent:t.id()}),a=[]),1===n.length&&(n.push(t),n.length>1))){var c=r.edges().map(function(e){return e.id()}),o="".concat(n[0].id()).concat(n[1].id());c.includes("e"+o)?window.alert("Connection already exists"):r.add({group:"edges",data:{id:"e"+n[0].id()+n[1].id(),source:n[0].id(),target:n[1].id(),name:""}}),n=[]}}),r.on("lock",function(e){var a=e.target;t?(t=!1,a.unlock()):(window.alert("choose target"),n.push(a),a.unlock())}),r},O=(n(65),Object(i.b)(function(e){return{cy:e.cy,nodes:e.nodes}},{})(function(e){var t=e.cy,n=function(e){t.nodes(t.nodes().filter(function(t){return t.id()===e.target.id})).select();var n=t.nodes(t.nodes().filter(function(t){return t.id()===e.target.id}));console.log(n),setTimeout(function(){t.nodes().unselect()},500)};if(e.nodes[0]){var a=e.nodes.map(function(e){return r.a.createElement("tr",{key:e.id()},r.a.createElement("td",{onClick:n,id:e.id()},e.data("name")+" "+e.id()))});return r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"NAME")),a))}return r.a.createElement("div",null,"Select Graph")})),T={initializeNodes:function(e){return{type:"INITNODES",data:e}},initializeEdges:function(e){return{type:"INITEDGES",data:e}},initializeJson:function(){return function(){var e=Object(p.a)(d.a.mark(function e(t){var n;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.getAll();case 2:n=e.sent,t({type:"INIT",data:n});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},initCy:function(e){return{type:"INITCY",data:e}},postJson:function(e){return function(){var t=Object(p.a)(d.a.mark(function t(n){var a;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.create(e);case 2:return t.next=4,h.getAll();case 4:a=t.sent,n({type:"POST",data:a});case 6:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},updateJson:function(e,t){return function(){var n=Object(p.a)(d.a.mark(function n(a){var r;return d.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h.update(e,t);case 2:return n.next=4,h.getAll();case 4:r=n.sent,a({type:"UPDATE",data:r});case 6:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}()},initJsonId:function(e){return function(){var t=Object(p.a)(d.a.mark(function t(n){var a;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.getById(e);case 2:a=t.sent,n({type:"INITID",data:a});case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},removeGraphId:function(e){return function(){var t=Object(p.a)(d.a.mark(function t(n){var a;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.remove(e);case 2:return t.next=4,h.getAll();case 4:a=t.sent,n({type:"DELETEID",data:a});case 6:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}},z=Object(i.b)(function(e){return{graph:e.json}},T)(function(e){var t=["ellipse","triangle","rectangle","round-rectangle","bottom-round-rectangle","cut-rectangle","barrel","rhomboid","diamond","pentagon","hexagon","concave-hexagon","heptagon","octagon","star","tag","vee"].map(function(e){return{value:e,label:e}}),n=["blue","red","green","teal","yellow","white","black","gray","brown"].map(function(e){return{value:e,label:e}}),c=Object(a.useState)(""),o=Object(u.a)(c,2),i=o[0],l=o[1],d=Object(a.useState)("0"),p=Object(u.a)(d,2),f=p[0],m=p[1],v=Object(a.useState)(!0),h=Object(u.a)(v,2),g=h[0],b=h[1],w=Object(a.useState)([]),y=Object(u.a)(w,2),N=y[0],j=y[1],x=Object(a.useState)("new"),I=Object(u.a)(x,2),T=I[0],z=I[1];Object(a.useEffect)(function(){l(k())},[]),setTimeout(function(){D()},1e3);var D=function(){e.graph&&j(e.graph.map(function(e){return{value:e.id,label:e.name}}))};g&&(e.initCy(i),e.initializeJson(),e.graph&&(D(),b(!1)));var S=function(){e.initializeEdges(i.edges()),e.initializeNodes(i.nodes())},G=function(){e.initializeEdges(""),e.initializeNodes("")},A=function(t){var n;if("0"!==f||typeof t===typeof f)if(typeof t===typeof f){var a=t;n=e.graph.filter(function(e){return e.id===a}),console.log(n[0].json),i.json(n[0].json)}else n=e.graph.filter(function(e){return e.id===f}),i.json(n[0].json);S()};return r.a.createElement("div",{className:"Header"},r.a.createElement(E,{currName:T}),r.a.createElement("div",{className:"Wrapper"},r.a.createElement("div",{className:"LeftPanel"},r.a.createElement("div",{className:"LeftPanelLeft"},r.a.createElement("h3",{className:"GraphName"},"Graph: ",T," "),r.a.createElement(s.a,{placeholder:"Graph",className:"Select",name:"graph",onChange:function(t){i.reset();var n=t.value;m(n);var a=e.graph.filter(function(e){return e.id===n});z(a[0].name),A(n),S()},options:N}),r.a.createElement(O,null))),r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"UpperButtons"},r.a.createElement("button",{onClick:function(){var t=window.prompt("New Graph Name:").toString();e.graph.map(function(e){return e.name}).includes(t)?window.alert("graph ".concat(t," exists already")):(z(t),i.destroy(),l(k(!0)),G())},className:"UpperButton"},"New Graph"),r.a.createElement("button",{onClick:function(){"0"!==f?(window.confirm("Delete ".concat(T," from app & database"))?(i.destroy(),l(k(!0)),e.removeGraphId(f),z("new")):console.log("no deletion"),G()):window.alert("graph has not been saved")},className:"UpperButton"},"Delete Graph"),r.a.createElement("button",{onClick:function(){var t=window.prompt("Name: "),n={json:i.json(),name:t};"0"!==f&&e.removeGraphId(f),z(t),e.postJson(n),i.resize()},className:"UpperButton"},"Rename Graph")),r.a.createElement("div",{className:"Cy",id:"cy"}),r.a.createElement("div",{className:"AddNodePanel"},r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t=function(){var e=i.nodes().size();return e+=1}(),n=i.add({data:{id:"".concat(t)+T,name:""},position:{x:200,y:200}});i.style().selector("node#"+n.id()).style({"background-color":"".concat(e.target.color.value)||"black",shape:"".concat(e.target.shape.value)||"ellipse"}).update(),S()}},r.a.createElement("button",{type:"submit"},"Add Node"),r.a.createElement(s.a,{placeholder:"ellipse",className:"AddNodePanel",name:"shape",options:t}),r.a.createElement(s.a,{placeholder:"black",className:"AddNodePanel",name:"color",options:n}))),r.a.createElement("div",{className:"Panel"},r.a.createElement("button",{onClick:function(){var t={json:i.json(),name:T};console.log(t.name),e.graph.map(function(e){return e.name}).includes(t.name)?window.confirm("Already graph named ".concat(t.name," overwrite?"))&&e.updateJson(f,t):e.postJson(t)}},"save"),r.a.createElement("button",{onClick:A},"load")))))}),D=n(9),S=n(32),G=Object(D.c)({json:g,nodes:w,edges:y,cy:b}),A=Object(D.d)(G,Object(D.a)(S.a));A.subscribe(function(){console.log(A.getState())});var C=A;o.a.render(r.a.createElement(i.a,{store:C},r.a.createElement(z,null)),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.949154e4.chunk.js.map